model User {
  id               String  @id @default(uuid()) @db.Uuid
  firebaseId       String  @unique @db.VarChar(50)
  fullName         String? @db.VarChar(255)
  email            String  @unique
  phone            String? @db.VarChar(20)
  isEmailConfirmed Boolean @default(false)
  location           Unsupported("geometry(Point,4326)")?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())

  roleId String @db.Uuid
  role   Role   @relation(fields: [roleId], references: [id], onDelete: NoAction)

  merchant Merchant?

  ledgerEventsFrom LedgerEvent[] @relation("LedgerFromUser")
  ledgerEventsTo   LedgerEvent[] @relation("LedgerToUser")

  balances   UserBalance[]
  emailVerifications EmailVerification[]
  storePreferences UserStorePreference[]
  consumerProgresses CustomerProgress[]
  paymentRequests PaymentRequest[]
  devices UserDevice[]

  @@map("users")
}
